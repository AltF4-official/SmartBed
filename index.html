<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SmartBed Web Controller</title>
  <style>
    :root {
      --primary-color: #1e90ff;
      --secondary-color: #111;
      --foreground-color: #fff;
      --error-color: #f33;
    }
    body {
      margin: 0;
      padding: 20px;
      background: var(--secondary-color);
      color: var(--foreground-color);
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 { margin-bottom: 1rem; }

    /* Power Button */
    #powerBtn {
      width: 100px; height: 100px;
      font-size: 2rem;
      border: none; border-radius: 50%;
      background: var(--primary-color);
      color: var(--foreground-color);
      cursor: pointer;
    }

    /* Controls */
    .controls { max-width:300px; width:100%; margin-top:1rem; }
    .slider-row {
      display:flex; align-items:center; margin-bottom: .5rem;
    }
    .slider-row span { width:70px; }
    input[type=range] { flex:1; }

    /* Modals */
    .modal-backdrop {
      position:fixed; top:0; left:0; right:0; bottom:0;
      background:rgba(0,0,0,0.4);
      display:none; align-items:center; justify-content:center;
    }
    .modal {
      background: var(--secondary-color);
      border-radius:12px;
      padding:1.5rem;
      width:50vw; max-width:400px; max-height:80vh;
      overflow-y:auto;
      box-shadow:0 4px 16px rgba(0,0,0,0.6);
    }
    .modal h2 { margin-top:0; }

    .modal label {
      display:flex; align-items:center; margin:0.5rem 0;
    }
    .modal label span {
      width:80px; text-align:right; margin-right:.5rem;
    }
    .modal input[type=color] { width:2rem; height:2rem; border:none; padding:0; }

    .modal button {
      margin-top:1rem; padding:.5rem 1rem;
      border:none; border-radius:8px;
      cursor:pointer;
    }
    .modal .actions { display:flex; gap:1rem; }

    /* Notification */
    #notification {
      position:fixed; bottom:-100px; left:50%;
      transform:translateX(-50%);
      color: var(--error-color);
      font-weight:bold;
    }
    @keyframes notifIn {
      to { bottom:40px; }
    }
    @keyframes notifOut {
      to { bottom:-100px; }
    }
  </style>
</head>
<body>

  <h1>SmartBed</h1>
  <button id="powerBtn">⏻</button>

  <div class="controls">
    <div class="slider-row">
      <span>Brightness</span>
      <input type="range" id="brightness" min="0" max="100" value="35">
      <span id="brightVal">35%</span>
    </div>

    <button id="flashToggle">Flash Settings…</button>
    <button id="themeToggle">Theme Settings…</button>
  </div>

  <!-- Flash Modal -->
  <div id="flashModalBg" class="modal-backdrop">
    <div class="modal">
      <h2>Flash Settings</h2>
      <label><span>On (ms):</span><input type="number" id="flashOn" min="10" max="10000" value="100"></label>
      <label><span>Off (ms):</span><input type="number" id="flashOff" min="10" max="10000" value="100"></label>
      <div class="actions">
        <button id="flashCancel">Cancel</button>
        <button id="flashApply" style="background:var(--primary-color);color:white;">Apply</button>
      </div>
    </div>
  </div>

  <!-- Theme Modal -->
  <div id="themeModalBg" class="modal-backdrop">
    <div class="modal">
      <h2>Theme Settings</h2>
      <label><span style="width:auto;text-align:left;">Select:</span>
        <select id="themeSelect">
          <option>Electric Blue & Dark Gray</option>
          <option>Baby Blue & Dark Gray</option>
          <option>Bubblegum Pink & White</option>
          <option>Forest Green & Dark Gray</option>
          <option>Gold & Dark Gray</option>
          <option>Cherry & Dark Gray</option>
          <option>Soft Lilac & White</option>
          <option>Custom</option>
        </select>
      </label>
      <div id="customColors" style="display:none;">
        <label><span>Primary:</span><input type="color" id="primaryColor" value="#1e90ff"></label>
        <label><span>Secondary:</span><input type="color" id="secondaryColor" value="#111111"></label>
      </div>
      <div class="actions">
        <button id="themeClose">Close</button>
      </div>
    </div>
  </div>

  <div id="notification"></div>

  <script>
    // Power toggle (stub)
    document.getElementById('powerBtn').onclick = () => {
      const btn = document.getElementById('powerBtn');
      btn.style.filter = btn.style.filter ? '' : 'brightness(0.7)';
    };

    // Brightness
    const br = document.getElementById('brightness'), bv = document.getElementById('brightVal');
    br.oninput = ()=> bv.textContent = br.value + '%';

    // Flash modal logic
    const flashBg = document.getElementById('flashModalBg');
    document.getElementById('flashToggle').onclick = () => flashBg.style.display='flex';
    document.getElementById('flashCancel').onclick =
      () => flashBg.style.display='none';
    document.getElementById('flashApply').onclick = () => {
      const on = +document.getElementById('flashOn').value,
            off = +document.getElementById('flashOff').value;
      if (isNaN(on)||isNaN(off)||on<10||off<10||on>10000||off>10000) {
        showNotification('Flash timing must be 10–10000 ms');
      } else {
        showNotification('Flash applied', false);
        flashBg.style.display='none';
      }
    };

    // Theme modal logic
    const themeBg = document.getElementById('themeModalBg'),
          themeSelect = document.getElementById('themeSelect'),
          customDiv = document.getElementById('customColors');
    document.getElementById('themeToggle').onclick = ()=> themeBg.style.display='flex';
    document.getElementById('themeClose').onclick = ()=> themeBg.style.display='none';
    themeSelect.onchange = ()=>{
      if (themeSelect.value==='Custom') customDiv.style.display='block';
      else {
        customDiv.style.display='none';
        // apply presets:
        const presets = {
          'Electric Blue & Dark Gray': ['#1e90ff','#111111'],
          'Baby Blue & Dark Gray':    ['#B3E5FC','#111111'],
          'Bubblegum Pink & White':   ['#111111','#FF6EB4'],
          'Forest Green & Dark Gray': ['#228B22','#111111'],
          'Gold & Dark Gray':         ['#FFD700','#111111'],
          'Cherry & Dark Gray':       ['#FF0000','#111111'],
          'Soft Lilac & White':       ['#111111','#D8BFD8']
        };
        let [p,s] = presets[themeSelect.value]||['#1e90ff','#111'];
        setTheme(p,s);
      }
    };

    // Color pickers
    document.getElementById('primaryColor').oninput =
    document.getElementById('secondaryColor').oninput = e => {
      setTheme(
        document.getElementById('primaryColor').value,
        document.getElementById('secondaryColor').value
      );
    };

    function setTheme(p,s) {
      document.documentElement.style.setProperty('--primary-color', p);
      document.documentElement.style.setProperty('--secondary-color', s);
    }

    // Notification
    const note = document.getElementById('notification');
    function showNotification(msg, isError=true) {
      note.textContent = msg;
      note.style.color = isError ? 'var(--error-color)' : 'var(--primary-color)';
      note.style.display = 'block';
      note.style.animation = 'notifIn 0.4s forwards';
      setTimeout(()=>{
        note.style.animation = 'notifOut 0.4s forwards';
      }, 3000);
    }
  </script>
</body>
</html>
